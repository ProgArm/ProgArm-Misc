#!/bin/bash
FILE_CPP='input_codes.hpp'
FILE_PYTHON='input_codes.py'
FILE_PERL='input_codes.pl'

NO_EDIT_NOTICE='Do not edit this file! It is generated automatically.'

echo "// $NO_EDIT_NOTICE" > "$FILE_CPP"
echo "# $NO_EDIT_NOTICE" > "$FILE_PYTHON"

declare -A combinations=(['SX']=0 ['LX']=1 ['XS']=2 ['XL']=3 ['SS']=4 ['LL']=5)

while IFS='| ' read -r _ first second name; do
    action=0
    if [[ $first && $second && $name ]]; then
        first=${combinations["${first^^}"]}
        second=${combinations["${second^^}"]}
        ((action = first * 6 + second)) # *6 is a base 6 left shift
        echo "static const int INPUT_${name^^} = $action;" >> "$FILE_CPP"

	# TODO this stuff makes sense in C, but we should use dict in other languages
        echo "INPUT_${name^^} = $action" >> "$FILE_PYTHON"
	echo "INPUT_${name^^} = $action;" >> "$FILE_PERL"
    fi
done < bimorseCodes.org
